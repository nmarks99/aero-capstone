\documentclass[11pt, oneside, letter]{memoir}

% -----BEGIN PACKAGES-----
% Basic packages
\usepackage[T1]{fontenc}
\usepackage[margin=1in]{geometry}

% When adding a new package, add a comment briefly explaining why it is added
\usepackage{listings} % used for code formatting
\usepackage{blindtext} % filler text 
\usepackage{pdfpages} % insert PDFs into the document
\usepackage{todonotes} % \todo command
\usepackage{xspace} % \xspace command; not related to SpaceX ;)
\usepackage{subcaption} % subfigures
\usepackage{titlesec} % sexier section markers
\usepackage{amsmath} % \equation environment
\usepackage{tabulary} % better tables
\usepackage{longtable} % longer tables
\usepackage[hyphens]{url}
\usepackage[hidelinks,breaklinks]{hyperref} % toc has links
\usepackage{makecell} % \makecell command for multiline table cells
\usepackage[export]{adjustbox} % valign for alignment
\usepackage{xpatch} % to patch miscellanious commands manually
\usepackage{fancyhdr} % more advanced headers
\usepackage{tikz} % native charts
\usetikzlibrary{shapes,arrows,trees,calc} % tikz features
\usepackage{enumitem} % to allow customization of itemize and similar environments
\usepackage{mfirstuc} % title case automation
\usepackage{lastpage} % page number "of LASTPAGE"
\usepackage{float} % binding figures to sections etc
\usepackage{array} % array stretch to pad the tables and other table fun
\usepackage{supertabular} % headers on each page of longtables
\usepackage{color, colortbl} % color cells 
\usepackage{tablefootnote} % footnotes in tables
\usepackage{pdflscape} % landscape environment
\usepackage[ruled,vlined]{algorithm2e}
\usepackage[noend]{algorithmic} % also psuedocode
\usepackage{cite} % references
\usepackage{url} % url refs
\usepackage{subcaption}
\usepackage{graphicx}
% -----END PACKAGES-----

% -----BEGIN GLOBAL STYLE-----

% Misc config

% listings style
% Set up listings style
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
% \definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{backcolour}{rgb}{255.0,255.0,255.0}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}


\usepackage{fontspec}
\setmainfont{Droid Serif}
\setsansfont{Open Sans}
\openany % memoir layout
\xpatchcmd{\chapter}{\thispagestyle{chapter}}{}{}{} % chapter pages are formatted same as others
\xpatchcmd{\listoffigures}{\thispagestyle{chapter}}{}{}{} % chapter pages are formatted same as others
\renewcommand{\chaptername}{Section} % "Chapter" is only a logical tier, so call them sections
\maxtocdepth{subsection} % ToC uses subsection
\setsecnumdepth{subsection}

\renewcommand{\arraystretch}{1.5} % add a little bit more than standard padding to tables

% ToC
\renewcommand\contentsname{Table of Contents}
\renewcommand{\cftchapterfont}{\large\bfseries\sffamily}
\renewcommand{\cftchapterpagefont}{\large\bfseries\sffamily}
\renewcommand{\cftsectionfont}{\sffamily}  

% Header / footer
\pagestyle{fancy} % use fancyhdr
\addtocontents{toc}{\protect\thispagestyle{fancy}}
\addtocontents{lof}{\protect\thispagestyle{fancy}}
\addtocontents{lot}{\protect\thispagestyle{fancy}}
\lhead{\color{nu-purple}\sffamily\rightmark}
\rhead{\color{nu-purple}\sffamily\leftmark}
\lfoot{\color{nu-purple}\sffamily Rotor-Powered Rocket Lander}
\cfoot{\color{nu-purple}\sffamily}
\rfoot{\color{nu-purple}\sffamily\thepage\xspace} %of \pageref{LastPage}}
\renewcommand{\headrulewidth}{2pt}
\renewcommand{\headrule}{\hbox to\headwidth{%
    \color{nu-purple}\leaders\hrule height \headrulewidth\hfill}}
\renewcommand{\footrulewidth}{2pt}
\renewcommand{\footrule}{\hbox to\headwidth{%
    \color{nu-purple}\leaders\hrule height \headrulewidth\hfill}}

% Section line formatting
\titleformat{\chapter}[hang]
    {\Huge\sffamily\bfseries}
    {\thechapter\xspace{|}\xspace}
    {0pt}
    {\Huge\raggedright\bfseries}

% Special case for table of contents
\titleformat{name=\chapter,numberless}[hang]
    {\Huge\sffamily\bfseries}
    {\thechapter\xspace{|}\xspace}
    {0pt}
    {\Huge\raggedright\bfseries}

\titleformat{\section}[hang]
    {\LARGE\sffamily}
    {\thesection}
    {.5em}
    {}

\titleformat{\subsection}[hang]
    {\Large\sffamily\color{nu-purple}}
    {\thesubsection}
    {.5em}
    {}
    
\titleformat{\paragraph}
    {\sffamily\bfseries\color{nu-purple}}
    {}
    {0pt}
    {}
    
\titlespacing*{\paragraph}
    {0pt}
    {1em}
    {0.5em}
% -----END GLOBAL STYLE-----

% NUSTARS library
\include{nustars_lib}

\begin{document}

\frontmatter


\begin{titlingpage}
% \begin{figure}[t]
%     \centering\includegraphics[width=\textwidth]{mccormick-logo.png}
% \end{figure}
\centering
\HUGE\color{nu-purple}\sffamily Rotor-Powered Rocket Lander \\
\vspace{1cm}
\Large\color{black}\sffamily June 9, 2022\\
\vspace{1cm}
\includegraphics[width=0.28\textwidth]{src/figs/matt_holding_rocket.png}

\vspace{0.5cm}

\Large\color{black}\sffamily Submitted by:\\
\Large\color{gray}\sffamily Brooke Fujishima, Alexander Haws, Nicholas Marks,\\
Jorge Mena, David Michaels, Matthew Vinci\\

\vspace{1cm}
\Large\color{black}\sffamily Submitted to:\\
\Large\color{gray}\sffamily Sridhar Krishnaswamy \\
\vspace{1cm}

\Large\color{black}\sffamily Faculty Supervisors: \\
\Large\color{gray}\sffamily Michael Beltran, Alex Birdwell \\
\vspace{1cm}

\Large\color{black}\sffamily Sponsored by: \\
\Large\color{gray}\sffamily ME 398 Capstone Course - Mechanical Engineering Department\\
\vspace{1cm}
\end{titlingpage}

\renewcommand{\familydefault}{\sfdefault}
\tableofcontents*\clearpage
\listoffigures\clearpage
\listoftables\clearpage
% \listoftodos % REMOVE BEFORE SUBMISSION
\renewcommand{\familydefault}{\rmdefault}



% BODY OF REPORT
\mainmatter 
\include{src/summary}
\include{src/background}
\include{src/benchmarking}
\include{src/needs}
\include{src/architecture}
\include{src/design}
\include{src/ea}
\include{src/ea-landinglegs}
\include{src/cad-electrical}
\include{src/testing}
\include{src/cost}
\include{src/patent}
\include{src/contextual-analysis}
\include{src/future}
\include{src/acknowledgements}



% Include references
\begingroup % Hack to fix the biblo chapter number
\titleformat{\chapter}[hang]
    {\Huge\sffamily\bfseries}
    {}
    {0pt}
    {\Huge\raggedright\bfseries}
\titleformat{name=\chapter,numberless}[hang]
    {\Huge\sffamily\bfseries}
    {}
    {0pt}
    {\Huge\raggedright\bfseries}

\renewcommand\bibname{{References}}
\bibliography{references}
\bibliographystyle{ieeetr}
\endgroup


% Include appendices
\appendix
\include{src/appendices/main-code}
\include{src/appendices/sts_code}
\include{src/appendices/cold-gas-thruster/cgt}

\end{document}
